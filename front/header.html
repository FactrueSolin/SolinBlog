<style>
  :root {
    color-scheme: light dark;
    --bg-fallback: #F5F4ED;
    --bg-image: url('/public/light.png');
    --bg: var(--bg-image) top center/100% auto repeat-y, var(--bg-fallback);
    --text: #262624;
    --primary: #C96442;
    --border: rgba(35, 35, 45, 0.12);
    --muted: rgba(38, 38, 36, 0.68);
    --surface: rgba(255, 255, 255, 0.7);
    --card-bg: rgba(255, 255, 255, 0.85);
    --card-shadow: 0 12px 30px rgba(15, 23, 42, 0.08);
    --transition: all 0.4s cubic-bezier(0.25, 0.1, 0.25, 1);
    --font-stack: "Hiragino Maru Gothic ProN", "Meiryo", "SF Pro", "Segoe UI", sans-serif;
  }

  :root[data-theme="light"] {
    color-scheme: light;
    --bg-fallback: #F5F4ED;
    --bg-image: url('/public/light.png');
    --bg: var(--bg-image) top center/100% auto repeat-y, var(--bg-fallback);
    --text: #262624;
    --primary: #C96442;
    --border: rgba(35, 35, 45, 0.12);
    --muted: rgba(38, 38, 36, 0.68);
    --surface: rgba(255, 255, 255, 0.7);
    --card-bg: rgba(255, 255, 255, 0.85);
    --card-shadow: 0 12px 30px rgba(15, 23, 42, 0.08);
  }

  :root[data-theme="dark"] {
    color-scheme: dark;
    --bg-fallback: linear-gradient(135deg, #1e2d40 0%, #2d4059 45%, #3a506b 100%);
    --bg-image: url('/public/night.png');
    --bg: var(--bg-image) top center/100% auto repeat-y, var(--bg-fallback);
    --text: #e0e7f1;
    --primary: #a4c3b2;
    --border: rgba(255, 255, 255, 0.15);
    --muted: rgba(224, 231, 241, 0.72);
    --surface: rgba(30, 45, 64, 0.65);
    --card-bg: rgba(30, 45, 64, 0.72);
    --card-shadow: 0 16px 40px rgba(0, 0, 0, 0.35);
  }

  @media (prefers-color-scheme: light) {
    :root {
      color-scheme: light;
      --bg-fallback: #F5F4ED;
      --bg-image: url('/public/light.png');
      --bg: var(--bg-image) top center/100% auto repeat-y, var(--bg-fallback);
      --text: #262624;
      --primary: #C96442;
      --border: rgba(35, 35, 45, 0.12);
      --muted: rgba(38, 38, 36, 0.68);
      --surface: rgba(255, 255, 255, 0.7);
      --card-bg: rgba(255, 255, 255, 0.85);
      --card-shadow: 0 12px 30px rgba(15, 23, 42, 0.08);
    }
  }

  @media (prefers-color-scheme: dark) {
    :root {
      color-scheme: dark;
      --bg-fallback: linear-gradient(135deg, #1e2d40 0%, #2d4059 45%, #3a506b 100%);
      --bg-image: url('/public/night.png');
      --bg: var(--bg-image) top center/100% auto repeat-y, var(--bg-fallback);
      --text: #e0e7f1;
      --primary: #a4c3b2;
      --border: rgba(255, 255, 255, 0.15);
      --muted: rgba(224, 231, 241, 0.72);
      --surface: rgba(30, 45, 64, 0.65);
      --card-bg: rgba(30, 45, 64, 0.72);
      --card-shadow: 0 16px 40px rgba(0, 0, 0, 0.35);
    }
  }

  * {
    box-sizing: border-box;
  }

  .site-header {
    max-width: 880px;
    margin: 32px auto 24px;
    padding: 0 24px;
    font-family: var(--font-stack);
    color: var(--text);
  }

  .site-header__inner {
    display: grid;
    grid-template-columns: auto minmax(220px, 1fr) auto;
    align-items: center;
    gap: 16px;
    padding: 16px 20px;
    border-radius: 14px;
    background: var(--card-bg);
    border: 1px solid var(--border);
    box-shadow: var(--card-shadow);
    backdrop-filter: blur(6px);
  }

  .site-title {
    margin: 0;
    font-size: 1.4rem;
    font-weight: 700;
    letter-spacing: 0.02em;
  }

  .site-title a {
    color: var(--text);
    text-decoration: none;
  }

  .site-title a:hover {
    color: var(--primary);
  }

  .search-bar {
    position: relative;
  }

  .search-input {
    width: 100%;
    padding: 12px 16px 12px 44px;
    border-radius: 999px;
    border: 1px solid var(--border);
    background: var(--surface);
    color: var(--text);
    font-size: 15px;
    outline: none;
    transition: var(--transition);
  }

  .search-input::placeholder {
    color: var(--muted);
  }

  .search-input:focus {
    border-color: var(--primary);
    box-shadow: 0 0 0 3px rgba(201, 100, 66, 0.15);
  }

  .search-icon {
    position: absolute;
    left: 16px;
    top: 50%;
    transform: translateY(-50%);
    width: 18px;
    height: 18px;
    color: var(--muted);
    pointer-events: none;
  }

  .nav-link {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    padding: 8px 16px;
    border-radius: 999px;
    background: var(--primary);
    color: #fff;
    text-decoration: none;
    font-size: 14px;
    transition: var(--transition);
    white-space: nowrap;
  }

  .header-actions {
    display: inline-flex;
    align-items: center;
    gap: 10px;
    justify-self: end;
  }

  .theme-toggle {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 40px;
    height: 40px;
    border-radius: 999px;
    border: 1px solid var(--border);
    background: var(--surface);
    color: var(--text);
    cursor: pointer;
    transition: var(--transition);
  }

  .theme-toggle:hover {
    transform: translateY(-2px);
    box-shadow: var(--card-shadow);
  }

  .theme-toggle svg {
    width: 20px;
    height: 20px;
  }

  .github-link {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 40px;
    height: 40px;
    border-radius: 999px;
    border: 1px solid var(--border);
    background: var(--surface);
    color: var(--text);
    text-decoration: none;
    transition: var(--transition);
  }

  .github-link:hover {
    transform: translateY(-2px);
    box-shadow: var(--card-shadow);
    color: var(--primary);
  }

  .github-link svg {
    width: 20px;
    height: 20px;
  }

  .nav-link:hover {
    transform: translateY(-2px);
    box-shadow: 0 10px 20px rgba(201, 100, 66, 0.25);
  }

  @media (max-width: 720px) {
    .site-header__inner {
      grid-template-columns: 1fr;
      text-align: center;
    }

    .search-bar {
      width: 100%;
    }

    .header-actions {
      justify-self: center;
    }

    .nav-link {
      justify-content: center;
    }
  }
</style>

<header class="site-header">
  <div class="site-header__inner">
    <h1 class="site-title">
      <a href="/">SolinBlog</a>
    </h1>
    <div class="search-bar">
      <svg class="search-icon" viewBox="0 0 24 24" aria-hidden="true" focusable="false">
        <path d="M10.5 3a7.5 7.5 0 0 1 5.96 12.06l3.22 3.22a1 1 0 1 1-1.42 1.42l-3.22-3.22A7.5 7.5 0 1 1 10.5 3zm0 2a5.5 5.5 0 1 0 0 11a5.5 5.5 0 0 0 0-11z" fill="currentColor"/>
      </svg>
      <input class="search-input" id="search-input" type="search" placeholder="搜索文章..." aria-label="搜索文章">
    </div>
    <div class="header-actions">
      <a class="nav-link" href="/">首页</a>
      <a class="github-link" href="https://github.com/FactrueSolin/SolinBlog" target="_blank" rel="noopener noreferrer" aria-label="GitHub 仓库" title="GitHub 仓库">
        <svg viewBox="0 0 24 24" aria-hidden="true" focusable="false">
          <path d="M12 2C6.477 2 2 6.477 2 12c0 4.42 2.865 8.17 6.839 9.49.5.092.682-.217.682-.482 0-.237-.008-.866-.013-1.7-2.782.604-3.369-1.34-3.369-1.34-.454-1.156-1.11-1.463-1.11-1.463-.908-.62.069-.608.069-.608 1.003.07 1.531 1.03 1.531 1.03.892 1.529 2.341 1.087 2.91.831.092-.646.35-1.086.636-1.336-2.22-.253-4.555-1.11-4.555-4.943 0-1.091.39-1.984 1.029-2.683-.103-.253-.446-1.27.098-2.647 0 0 .84-.269 2.75 1.025A9.578 9.578 0 0112 6.836c.85.004 1.705.114 2.504.336 1.909-1.294 2.747-1.025 2.747-1.025.546 1.377.203 2.394.1 2.647.64.699 1.028 1.592 1.028 2.683 0 3.842-2.339 4.687-4.566 4.935.359.309.678.919.678 1.852 0 1.336-.012 2.415-.012 2.743 0 .267.18.578.688.48C19.138 20.167 22 16.418 22 12c0-5.523-4.477-10-10-10z" fill="currentColor"/>
        </svg>
      </a>
      <button class="theme-toggle" id="theme-toggle" type="button" aria-label="切换明暗模式" title="跟随系统">
        <svg class="theme-icon" viewBox="0 0 24 24" aria-hidden="true" focusable="false">
          <path d="M4 6a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-5l-3.2 3.2a.6.6 0 0 1-1-.4V16H6a2 2 0 0 1-2-2V6zm2 0v8h4a1 1 0 0 1 1 1v2.1L13.1 15a1 1 0 0 1 .7-.3H18V6H6z" fill="currentColor"/>
        </svg>
      </button>
    </div>
  </div>
</header>

<script>
  (function () {
    const themeToggle = document.getElementById("theme-toggle");
    if (!themeToggle) return;

    const icons = {
      system: '<svg class="theme-icon" viewBox="0 0 24 24" aria-hidden="true" focusable="false"><path d="M4 6a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-5l-3.2 3.2a.6.6 0 0 1-1-.4V16H6a2 2 0 0 1-2-2V6zm2 0v8h4a1 1 0 0 1 1 1v2.1L13.1 15a1 1 0 0 1 .7-.3H18V6H6z" fill="currentColor"/></svg>',
      light: '<svg class="theme-icon" viewBox="0 0 24 24" aria-hidden="true" focusable="false"><path d="M12 4.5a1 1 0 0 1 1 1V7a1 1 0 1 1-2 0V5.5a1 1 0 0 1 1-1zm0 11a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7zm7.5-3.5a1 1 0 0 1 1-1H22a1 1 0 1 1 0 2h-1.5a1 1 0 0 1-1-1zM3 11a1 1 0 0 1 1-1h1.5a1 1 0 0 1 0 2H4a1 1 0 0 1-1-1zm13.84-6.34a1 1 0 0 1 1.42 0l1.06 1.06a1 1 0 0 1-1.42 1.42l-1.06-1.06a1 1 0 0 1 0-1.42zM4.26 17.92a1 1 0 0 1 1.42 0l1.06 1.06a1 1 0 0 1-1.42 1.42l-1.06-1.06a1 1 0 0 1 0-1.42zm13.58 1.06a1 1 0 0 1 0-1.42l1.06-1.06a1 1 0 1 1 1.42 1.42l-1.06 1.06a1 1 0 0 1-1.42 0zM4.26 6.08a1 1 0 0 1 0-1.42L5.32 3.6a1 1 0 1 1 1.42 1.42L5.68 6.08a1 1 0 0 1-1.42 0z" fill="currentColor"/></svg>',
      dark: '<svg class="theme-icon" viewBox="0 0 24 24" aria-hidden="true" focusable="false"><path d="M12.8 3.2a.8.8 0 0 1 .86.96A7 7 0 1 0 19.84 13a.8.8 0 0 1 .96.86A8.5 8.5 0 1 1 12.8 3.2z" fill="currentColor"/></svg>'
    };

    const order = ["system", "light", "dark"];
    const stored = localStorage.getItem("theme");
    let current = order.includes(stored) ? stored : "system";

    const applyTheme = (value) => {
      const root = document.documentElement;
      if (value === "light") {
        root.setAttribute("data-theme", "light");
      } else if (value === "dark") {
        root.setAttribute("data-theme", "dark");
      } else {
        root.removeAttribute("data-theme");
      }
      const titleText = value === "system" ? "跟随系统" : value === "light" ? "明亮模式" : "暗黑模式";
      themeToggle.innerHTML = icons[value];
      themeToggle.setAttribute("aria-label", `切换明暗模式（当前：${value === "system" ? "跟随系统" : value === "light" ? "明亮" : "暗黑"}）`);
      themeToggle.setAttribute("title", titleText);
    };

    applyTheme(current);

    themeToggle.addEventListener("click", () => {
      const nextIndex = (order.indexOf(current) + 1) % order.length;
      current = order[nextIndex];
      localStorage.setItem("theme", current);
      applyTheme(current);
    });
  })();
</script>
